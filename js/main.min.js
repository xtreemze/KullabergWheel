var WOF=(function(){Array.prototype.randomize=function(){this.sort(function(h,g){return Math.round(Math.random())})};var f=(function(){if(document.body.style.MozTransform!==undefined){return"MozTransform"}else{if(document.body.style.WebkitTransform!==undefined){return"WebkitTransform"}else{if(document.body.style.OTransform!==undefined){return"OTransform"}}}}()),e=function(g){return g/(Math.PI*180)},a=function(h,k){var j="rotate(-"+k+"deg)";if(h.style[f]!==undefined){h.style[f]=j}var g=e(k%360),i="progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11="+g+", M12=-"+g+", M21="+g+", M22="+g+")";if(h.style.filter!==undefined){h.style.filter=i}h.setAttribute("data-rotation",k)},b=function(g){var j={};for(var h=0;h<g.length;h++){j[g[h]]=""}return j},d=(function(){var z=0,s=["KULLABERG NATURE RESERVE","KULLABERG NATURUM","HARBOR PORPOISE","PEREGRINE FALCON","SWEDEN","GATEWAY TO NATURE","NATURE IS AROUND THE CORNER","GO GREEN THINK TWICE"],A=["A","E","I","O","U"],m=[5000,600,500,300,500,800,550,400,300,900,500,300,900,0,600,400,300,-2,800,350,450,700,300,600],l=0,v=document.getElementById("spin"),j=document.getElementById("spin2"),x=document.getElementById("vowel"),u=document.getElementById("vowel2"),i=document.getElementById("display"),y=document.getElementById("wheel"),k=document.getElementById("newpuzzle"),n=document.getElementById("newpuzzle2"),t=document.getElementById("money"),o=document.getElementById("solve"),r=document.getElementById("solve2"),q=false,h=function(){return Math.random()*10+20},g=h(),w=0.5;return function p(){s.randomize();var K=[],C=[],M=[],G=false,F=function(R){M=[];C=[];G=false;K=R.split("");var S=document.createElement("div");i.appendChild(S);S.className="word";for(var P=0;P<K.length;++P){var Q=document.createElement("div");Q.className="wordLetter ";if(K[P]!==" "){Q.className+="letter";if(!(K[P] in b(C))){C.push(K[P])}S.appendChild(Q)}else{Q.className+="space";S=document.createElement("div");i.appendChild(S);S.className="word";S.appendChild(Q);S=document.createElement("div");i.appendChild(S);S.className="word"}Q.id="letter"+P}var O=document.createElement("div");i.appendChild(O);O.className="clear"},N=function(){if(!G&&!D("SOLVE THE PUZZLE?",null,true)){Materialize.toast("Puzzle NOT solved...",4000)}},B=function(T,R,S){var O=0;R=R===undefined?false:true;S=S===undefined?false:true;if(T.length&&!G){if((T in b(A))&&!R&&!S){Materialize.toast("Cannot guess a vowel right now!",4000);return false}if(R&&!(T in b(A))&&!S){Materialize.toast("Cannot guess a vowel right now!",4000);return false}for(var P=0;P<K.length;++P){if(T===K[P]){var Q=document.getElementById("letter"+P);if(Q.innerHTML!==T){++O}Q.innerHTML=T;if(T in b(C)&&!(T in b(M))){M.push(T)}}}if(M.length===C.length){Materialize.toast("PUZZLE SOLVED!",4000);G=true}return O}return false},J=function(){++z;if(z<s.length){while(i.hasChildNodes()){i.removeChild(i.firstChild)}F(s[z]);Materialize.toast("Spin the Kullaberg Wheel!",4000)}else{Materialize.toast("No more puzzles!",4000)}},L=function(){t.innerHTML=l},H=function(Q){clearTimeout(q);if(!G){g-=w;if(Q===undefined){Q=parseInt(y.getAttribute("data-rotation"))}a(y,Q);if(g>0){q=setTimeout(function(){H(Q+g)},1000/5)}else{g=h();var P=m[Math.floor(Math.round(parseInt(y.getAttribute("data-rotation"))%360)/15)];switch(parseInt(P)){case 0:Materialize.toast("BANKRUPT!",4000);l=0;break;case -1:Materialize.toast("FREE SPIN!",4000);break;case -2:Materialize.toast("LOSE A TURN",4000);break;default:Materialize.toast("YOU SPUN A "+P,4000);var O=D("YOU SPUN A "+P+" PLEASE ENTER A LETTER");l+=(parseInt(P)*O)}L()}}},E=0,D=function(T,Q,V){V=V===undefined?false:true;if(!G){var R=prompt(T,"");if(R){var U="";if(!V){U=R.toUpperCase().charAt(0)}else{U=R.toUpperCase().split("");function S(X,W){return !(X<W||W<X)}if(S(U,K)){for(var P=0;P<U.length;++P){B(U[P],Q,V)}}return G}var O=B(U,Q,V);if(O===false){++E;if(E<5){return D(T,Q,V)}}E=0;return O}else{++E;if(E<5){return D(T,Q,V)}}}return false};function I(Q,O,P){if(Q.addEventListener){Q.addEventListener(O,P,false)}else{if(Q.attachEvent){Q.attachEvent("on"+O,P)}}}I(x,"click",function(){if(l>200){if(D("PLEASE ENTER A VOWEL",true)!==false){l-=200}}else{Materialize.toast("You need more than 200 to buy a vowel",4000)}L()});I(u,"click",function(){if(l>200){if(D("PLEASE ENTER A VOWEL",true)!==false){l-=200}}else{Materialize.toast("You need more than 200 to buy a vowel",4000)}L()});I(k,"click",J);I(n,"click",J);I(v,"click",function(){H();Materialize.toast("Round and round it goes...",4000);Materialize.toast("Where it stops, no one knows!",4000)});I(j,"click",function(){H();Materialize.toast("Round and round it goes...",4000);Materialize.toast("Where it stops, no one knows!",4000)});I(y,"click",function(){H()});I(o,"click",function(){N()});I(r,"click",function(){N()});this.start=function(){F(s[z])}}}()),c=new d;return c}());WOF.start();Materialize.toast("Welcome to the Kullaberg Wheel!",4000);window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,a){window.setTimeout(b,1000/60)}}());